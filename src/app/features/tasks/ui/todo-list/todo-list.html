<mat-card class="todo-list-card">
  <mat-card-header>
    <mat-card-title>
      Todo List
      @if (hasTodos()) {
        <span class="todo-count">
          ({{ completedTodos() }}/{{ totalTodos() }})
        </span>
      }
    </mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <!-- Progress Bar -->
    @if (hasTodos()) {
      <div class="progress-section">
        <mat-progress-bar
          mode="determinate"
          [value]="completionPercentage()"
          [color]="allComplete() ? 'accent' : 'primary'"
        ></mat-progress-bar>
        <span class="progress-text">
          {{ completionPercentage() }}% complete
        </span>
      </div>

      <mat-divider></mat-divider>
    }

    <!-- Todo Items -->
    @if (hasTodos()) {
      <div class="todos">
        @for (todo of todos(); track todo.id) {
          <app-todo-item
            [todo]="todo"
            (toggleComplete)="onToggleTodo($event)"
            (delete)="onDeleteTodo($event)"
          ></app-todo-item>
        }
      </div>

      <mat-divider></mat-divider>
    } @else {
      <div class="empty-state">
        <p>No todos yet. Add your first one below!</p>
      </div>
    }

    <!-- Create Todo Form -->
    <div class="create-section">
      <app-todo-create-form
        (create)="onCreateTodo($event)"
      ></app-todo-create-form>
    </div>

    <!-- Completion Message -->
    @if (allComplete()) {
      <div class="completion-message">All todos completed! Great work!</div>
    }
  </mat-card-content>
</mat-card>
